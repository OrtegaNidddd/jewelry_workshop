@startuml Instalacion
title Diagrama de Instalacion - Flujo CI/CD

actor DevOps
component "Repositorio Git" as Repo
component "CI Runner" as CI
component "Pipeline Build" as Build
artifact "frontend.zip" as FrontPkg
artifact "api-image" as ApiImg
node "Registro de imagenes" as Registry
node "Ambiente Staging" as Stg {
  node "Servidor Staging" as StgSrv
}
node "Ambiente Produccion" as Prod {
  node "Servidor Prod" as ProdSrv
}
database "Base de datos" as DB
component "Migraciones" as Migrations

DevOps --> Repo : push codigo
Repo --> CI : webhook
CI --> Build : ejecutar pipeline
Build --> FrontPkg
Build --> ApiImg
Build --> Registry : publicar imagen
Build --> StgSrv : desplegar front/api
StgSrv --> DB : migrar datos
DevOps --> ProdSrv : aprobar release
Registry --> ProdSrv : descargar api-image
ProdSrv --> DB : migraciones finales
ProdSrv --> FrontPkg : servir assets
ProdSrv --> Migrations : ejecutar scripts

@enduml
